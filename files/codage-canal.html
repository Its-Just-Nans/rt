<!DOCTYPE html>
<html>
<head>
  <style>
	#canvas{
		border: 1px solid black;
		margin-top: 5px;
	}
	.buttonBinary{
		height:40px;
		width: 40px;
		font-size: large;
		margin-left: 2px;
		margin-right: 2px;
		display: inline-block;
	}
	#binaire{
		font-size: 0;
	}
  </style>
	<meta charset="UTF-8">
</head>
 <body onload="init();">
<center>


<div id='binaire'>

<button class="buttonBinary" id="button0" onclick="changeValue(0)">0</button>
<button class="buttonBinary"  id="button1" onclick="changeValue(1)">0</button>
<button class="buttonBinary" id="button2" onclick="changeValue(2)">0</button>
<button class="buttonBinary" id="button3" onclick="changeValue(3)">0</button>
<button class="buttonBinary" id="button4" onclick="changeValue(4)">0</button>
<button class="buttonBinary" id="button5" onclick="changeValue(5)">0</button>
<button class="buttonBinary" id="button6" onclick="changeValue(6)">0</button>
<button class="buttonBinary" id="button7" onclick="changeValue(7)">0</button>
<button class="buttonBinary" id="button8" onclick="changeValue(8)">0</button>
<button class="buttonBinary"  id="button9" onclick="changeValue(9)">0</button><button class="buttonBinary" id="button10" onclick="changeValue(10)">0</button></div>

<canvas id="canvas" width="800px" height="100px"></canvas>
<br>
<select id="motif">
    <option value="nrz">Non Return to Zero (NRZ)</option>
    <option value="rz">Return to Zero (RZ)</option>
    <option value="bip">Biphase</option>
</select>
<select id="format">
    <option value="unip">Unipolaire</option>
    <option value="bipo">Bipolaire</option>
    <option value="alte">Altern√©</option>
</select>
<br>
<br>
<button id="addButton" onclick="addButton()">Ajouter un bouton</button>
<button id="suprrButton" onclick="suprrButton()">Supprimer un bouton</button>
</center>
</body>
<script type="application/javascript" >

function init(){
    nbButton = Array();
    nombreButton = 10;
    for(var i=0; i<10;i++)
        nbButton.push(document.getElementById("button"+i));
		canvas = document.getElementById("canvas");
   if (canvas.getContext) {

		inCanvas = canvas.getContext('2d');
		YcanvasBase = canvas.height;
		traceCanvas();
   }
   	for (let item of document.getElementsByClassName('buttonBinary')) {
		item.addEventListener("click",  traceCanvas );
	}
}

function traceCanvas(){
		document.getElementById("canvas").style.width = (nombreButton+1) * 44 + 'px';
		document.getElementById("canvas").style.height = YcanvasBase + 'px';
		Yzero = canvas.height/2;
		Xzero = canvas.width/2;
		inCanvas.clearRect(0, 0, canvas.width, canvas.height);
		motif = document.getElementById('motif').selectedOptions[0].value;
		format = document.getElementById('format').selectedOptions[0].value;
		grille();
		trace();
}
function trace(){
inCanvas.strokeStyle = 'red';
inCanvas.lineWidth = 2;
inCanvas.beginPath();
inCanvas.moveTo(-1, Yzero);
var compteur = 0;
var compteurUn = 0;
	if(motif === "nrz"){
		if(format === "unip"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*compteur), Yzero-(2*Ycase));
				}
			}

		}else if(format === "bipo"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*compteur), Yzero+(2*Ycase));

				}else{
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*compteur), Yzero-(2*Ycase));
				}
			}
		
		}else if(format === "alte"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					compteurUn++;
					if(compteurUn%2 == 0){
						inCanvas.lineTo((Xcase*(compteur-1)), Yzero+(2*Ycase));
						inCanvas.lineTo((Xcase*compteur), Yzero+(2*Ycase));
					}else{
						inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
						inCanvas.lineTo((Xcase*compteur), Yzero-(2*Ycase));
					}
				}
			}
		
		}
		
	}else if(motif === "rz" ){
		if(format === "unip"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);
				}
			}

		}else if(format === "bipo"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);
				}
			}
		
		}else if(format === "alte"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					compteurUn++;
					if(compteurUn%2 == 0){
						inCanvas.lineTo((Xcase*(compteur-1)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);
					}else{
						inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
						inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
						inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero);
						inCanvas.lineTo((Xcase*compteur), Yzero);
					}
				}
			}
		
		}
		
	}else if(motif === "bip" ){
		if(format === "unip"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*compteur), Yzero);
				}
			}

		}else if(format === "bipo"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur)), Yzero-(2*Ycase));

				}else{
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur)), Yzero+(2*Ycase));
				}
			}
		
		}else if(format === "alte"){
			for (let item of document.getElementsByClassName('buttonBinary')) {
					compteur ++;
				if(item.innerHTML === "0"){
					inCanvas.lineTo((Xcase*(compteur-1)), Yzero);
					inCanvas.lineTo((Xcase*compteur), Yzero);

				}else{
					compteurUn++;
					if(compteurUn%2 == 0){
						inCanvas.lineTo((Xcase*(compteur-1)), Yzero+(2*Ycase));
						inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
						inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
						inCanvas.lineTo((Xcase*(compteur)), Yzero-(2*Ycase));
					}else{
						inCanvas.lineTo((Xcase*(compteur-1)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero-(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur-1)+(Xcase/2)), Yzero+(2*Ycase));
					inCanvas.lineTo((Xcase*(compteur)), Yzero+(2*Ycase));
					}
				}
			}
		
		}
	}
	inCanvas.stroke();
}
function grille(){
		inCanvas.fillStyle = 'grey';
		Ycase = canvas.height/6;
		Xcase = canvas.width/(nombreButton+1);
		var compteur = 0;
		for(var i = 0; i < (canvas.height); i += Ycase){
			compteur++;
			if(i== Ycase || i== 3*Ycase || i== 5*Ycase){
				inCanvas.fillRect(0, Math.floor(i), canvas.width, 1);
			}
		}
		for(var f = 0; f < (canvas.width-(Xcase/2)); f += Xcase){
			if(f != 0){
				inCanvas.fillRect(Math.floor(f), 0, 1, canvas.height);
			}
		}
}


function addButton(){
	if(nombreButton < 20 ){
		nombreButton++;
		document.getElementById('binaire').insertAdjacentHTML('beforeend', '<button  class="buttonBinary" id="button'+nombreButton+'" onclick="changeValue('+nombreButton+')">0</button>');
	}
	for (let item of document.getElementsByClassName('buttonBinary')) {
		item.addEventListener("click",  traceCanvas );
	}
	traceCanvas();
}
function suprrButton(){
	if(nombreButton >= 11 ){
		document.getElementById('button'+nombreButton).remove();
		nombreButton--;
	}
	traceCanvas();
}

function changeValue(valeur){
    if(parseInt(document.getElementById('button'+ valeur).innerHTML,10) == 0)
        document.getElementById('button'+ valeur).innerHTML = 1;
    else
        document.getElementById('button'+ valeur).innerHTML = 0;
}
document.getElementById('motif').addEventListener("input",  traceCanvas );
document.getElementById('format').addEventListener("input",  traceCanvas );
</script>
<html>