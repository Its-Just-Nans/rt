<!DOCTYPE html>
<head>
    <title>R&T</title>
    <link href="style.css" rel="stylesheet" />
</head>
<body>
    <nav>
        <h1 style="text-align: center;"><a id="link" href="">Navigation</a></h1>
        <ul>
            <li><a href="codage-canal">Codage Canal</a></li>
            <li><a href="sinus">Sinus</a></li>
        </ul>
        
    </nav>
    <section id="contenuMain">
        
    </section>
<script src="js/useful.js"></script>
<script>
    

let basePage;
if(window.location.search == ""){
    if(window.location.href.match('index.html')){
    basePage = window.location.href.replace('index.html', 'search.html');
    }else{
        basePage = window.location.origin + '/rt/' + 'search.html';
    }
}else{
    basePage = window.location.origin + '/rt/files/' + window.location.search.replace('?', '') + '.html';
}
loadNewPage(basePage);

function loadNewPage(url){
    let client = new HttpClient();
    client.get(url, function(response) {
        document.getElementById('contenuMain').innerHTML = response;
        let allScripts = document.getElementById('contenuMain').getElementsByTagName('script');
        for(let scripts of allScripts){
            eval(scripts.innerHTML);
        }
    }, function (error){
        console.log('log: ', error);
    });
}
const nav =  document.getElementsByTagName('nav');
const allLinks = nav[0].getElementsByTagName('a');
for(let element of allLinks){
    element.addEventListener('click', function () {
            const link = this.getAttribute('href');
            const newPath = window.location.origin + window.location.pathname + '?' + link;
            this.setAttribute('href', newPath);
        });
}
</script>
</body>